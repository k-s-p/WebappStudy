# Webアプリケーションに関する勉強記録

前回に引き続き[伸び悩んでいる3年目Webエンジニアのための、Python Webアプリケーション自作入門](https://zenn.dev/bigen1925/books/introduction-to-web-application-with-python)
を読み、Webアプリケーションとはどういうものなのかを理解していけたらと思います。
私は3年目でもなければWebエンジニアでもないのですが、とてもわかりやすく楽しい内容だと思うので、興味のある方はこの本を読んでみてください。

本記事は、Chapter9の内容について、自分用のまとめとして作成しています。

## [HTTPとは?](https://zenn.dev/bigen1925/books/introduction-to-web-application-with-python/viewer/what-is-http)

HTTPとは、WebブラウザがWebサーバと通信する際に使用するプロトコルです。つまり、TCPを使用して、このようなフォーマットでWebサービスと通信しようという約束事のようなものです。

他に、`SMTP`(メールの送信),`POP`(メールの受信)といったプロトコルも、TCP通信を行うことを前提としています。これらのプロトコルは、**アプリケーション層**のプロトコルで、「何を送るか」に関するプロトコルと言えます。そして、`TCP`や`UDP`のような、「どうやって送るか」に関するプロトコルは、**トランスポート層**のプロトコルになります。

* 参考

|層番号|OSI参照モデル|TCP/IPモデル|プロトコル|
|:----:|:-----------:|:----------:|:---:|
|7|アプリケーション層|アプリケーション層|HTTP,SMTP,POP3...|
|6|プレゼンテーション層|^|^|
|5|セッション層|^|^|
|4|トランスポート層|トランスポート層|TCP,UDP|
|3|ネットワーク層|インターネット層|IP|
|2|データリンク層|ネットワーク<br>インターフェース層|Ethernet,PPP|
|1|物理層|^|^|

## HTTPにおける2種類のメッセージ

HTTPでは、リクエストとレスポンスでそれぞれフォーマットが決まっています。

### HTTPリクエスト

HTTPリクエストは、大きく３つの要素から構成されます。

1. 1行目：**リクエストライン**
2. 2行目~空行まで：**リクエストヘッダ**
3. 空行から後ろ：**リクエストボディ**

#### リクエストライン

リクエストラインは、`<method> <request-target><Http-version>`という要素で構成されています。

* method：GET・POST・PUT・DELETEなど、リクエストの種類を伝えます。
* request-target：pathとよばれ、ドキュメントの場所を示します。Webアプリケーションにおいては、ファイルパスとして扱うより、どんな譲歩を求めているかを示す単なる文字列として扱うことが多いです。
* Http-version：通信の際に、クライアントがHTTPのルールに従って通信をしようとしているかを示します。

#### リクエストヘッダ

リクエストヘッダは、HTTPリクエストの2行目~空行までに書かれ、補助的な情報を伝える目的で使われます。1行につき、1つの情報を伝えられ、複数行で構成されます。どのヘッダも、`<field-name>:<field-value>`の形式をしています。

#### リクエストボディ

リクエストの本文を表します。例えば、入力されたフォームの情報をサーバーへ送るための`POST`メソッドでは、このリクエストボディが使われます。サービスごとに独自のパラメータや情報をおくる際には、リクエストボディに情報を記載します。

### HTTPレスポンス

HTTPレスポンスも、大きく3つの要素から構成されます。

1. ステータスライン
2. レスポンスヘッダ
3. レスポンスボディ

#### ステータスライン

ステータスラインは、`<Http-Version> <Status-Code><Reason-Phrase>`で構成されます。

* Http-Version：リクエストラインのバージョンのようなものです。
* Status-Code：レスポンスの概要を示す3桁のコードです。ステータスコードとして使える数字と意味は決められており、サーバー側が適切なステータスコードを返すことが求められます。`200`,`301`,`404`,`500`などです。
* Reason-Phrase：レスポンスの説明文です。ステータスコードと違い、文章が定義されているわけではないので、自由に付与していいです。`200:OK`,`301:Moved Permanently`, `404:Not Found`, `500:Internal Server Error`などです。

#### レスポンスヘッダ

リクエストヘッダと同様に、`<field-name>:<field-value>`の形式をしています。

#### レスポンスボディ

リクエストされたコンテンツの内容、またはエラーの内容などが含まれます。レスポンスボディでは、HTMLやJavascript、CSS、画像のバイナリデータなど様々なデータを返すことができます。ただし、`Content-Type`というヘッダーでデータ形式を指定する必要があります。